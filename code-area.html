<link rel="import" href="../polymer/polymer.html">

<link rel=stylesheet href="../codemirror/lib/codemirror.css">
<!-- <link rel=stylesheet href="../codemirror/doc/docs.css"> -->
<script src="../codemirror/lib/codemirror.js"></script>
<script src="../codemirror/mode/xml/xml.js"></script>
<script src="../codemirror/mode/javascript/javascript.js"></script>
<script src="../codemirror/mode/css/css.js"></script>
<script src="../codemirror/mode/htmlmixed/htmlmixed.js"></script>
<script src="../codemirror/addon/edit/matchbrackets.js"></script>

<!-- <script src="../codemirror/doc/activebookmark.js"></script> -->

<style>
  .CodeMirror { height: auto; border: 1px solid #ddd; }
  .CodeMirror-scroll { max-height: 200px; }
  .CodeMirror pre { padding-left: 7px; line-height: 1.25; }
</style>

<!--
`code-area`
Polymer element wrapping CodeMirror (highlighting syntax, plugins and options)

@demo demo/index.html
-->

<dom-module id="code-area">
  <template>
    <style>
      :host {
        display: block;
      }
      #editor1-pane,
      #editor2-pane {
          position:relative;
          display: block;
          width: 600px;
          height: 200px;
          border: solid 1px #bbb;
      }
      #editor1,
      #editor2 {
          font-size: 9pt;
      }
    </style>
      <div hidden>
        <content id="content"></content>
      </div>
    <h2>Hello [[prop1]]</h2>
    <div id="editor1-pane">
     <textarea id="editor">
     </textarea>
   </div>
  </template>

  <script>
    Polymer({

      is: 'code-area',

      properties: {
        mode: {
          type: String,
          value: 'code-area',
        },
      },

      ready: function() {
        console.log(this.mode);
          var textarea = this.$.editor;
          var codeMirror = CodeMirror.fromTextArea(textarea, {
            // value: Polymer.dom(this.$.content).nextSibling.wholeText,
            mode:'javascript',
            lineNumbers: true
          });
          console.log(textarea);
          codeMirror.setValue(Polymer.dom(this.$.content).nextSibling.wholeText);
         codeMirror.refresh();
      }

    });
    // document.addEventListener("DOMContentLoaded", function (e) {
    // });
  </script>
</dom-module>
